# Maintainer: zjuyk <ownbyzjuyk@gmail.com>

pkgname=mpv-osc-uosc
_gitname=uosc
pkgver=5.12.0
pkgrel=1
pkgdesc="Feature-rich minimalist proximity-based UI for MPV player."
arch=('x86_64')
url="https://github.com/tomasklaen/${_gitname}"
license=('LGPL-2.1-only')
depends=('mpv')
conflicts=(mpv-osc-uosc-git)
backup=("etc/mpv/script-opts/uosc.conf")
install=uosc.install
source=(
  "uosc.conf::${url}/releases/download/${pkgver}/uosc.conf"
  "uosc.zip::${url}/releases/download/${pkgver}/uosc.zip"
)
sha256sums=('49fd86337f6f22873989c2d70f3f0e5b4f6eee9a431612136ecd68028d6b7800'
            'ce5cf6bd1552de4b7cb166804f596cda678694f813041da89565171600385165')

package() {

  # remove unwanted binary files
  rm -rf "${srcdir}/scripts/uosc/bin/ziggy-windows.exe"
  rm -rf "${srcdir}/scripts/uosc/bin/ziggy-darwin"

  # install uosc
  mkdir -p "${pkgdir}/etc/mpv/scripts/"
  cp -r "${srcdir}/scripts/uosc/" "${pkgdir}/etc/mpv/scripts/"

  # install fonts
  cp -r "${srcdir}/fonts/" "${pkgdir}/etc/mpv/"

  # install config files
  mkdir -p "${pkgdir}/etc/mpv/script-opts"
  install -D -m644 "${srcdir}/uosc.conf" -t "${pkgdir}/etc/mpv/script-opts/"
}
